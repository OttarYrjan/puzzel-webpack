/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={441:(t,e,r)=>{var n;!function(s,o,a){if(s){for(var i,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)c[111+p]="f"+p;for(p=0;p<=9;++p)c[p+96]=p.toString();v.prototype.bind=function(t,e,r){var n=this;return t=t instanceof Array?t:[t],n._bindMultiple.call(n,t,e,r),n},v.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},v.prototype.trigger=function(t,e){var r=this;return r._directMap[t+":"+e]&&r._directMap[t+":"+e]({},t),r},v.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},v.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(b(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var r=t.composedPath()[0];r!==t.target&&(e=r)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},v.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},v.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(c[e]=t[e]);i=null},v.init=function(){var t=v(o);for(var e in t)"_"!==e.charAt(0)&&(v[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},v.init(),s.Mousetrap=v,t.exports&&(t.exports=v),void 0===(n=function(){return v}.call(e,r,e,t))||(t.exports=n)}function d(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent("on"+e,r)}function f(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return c[t.which]?c[t.which]:l[t.which]?l[t.which]:String.fromCharCode(t.which).toLowerCase()}function _(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function y(t,e,r){return r||(r=function(){if(!i)for(var t in i={},c)t>95&&t<112||c.hasOwnProperty(t)&&(i[c[t]]=t);return i}()[t]?"keydown":"keypress"),"keypress"==r&&e.length&&(r="keydown"),r}function m(t,e){var r,n,s,o=[];for(r=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),s=0;s<r.length;++s)n=r[s],u[n]&&(n=u[n]),e&&"keypress"!=e&&h[n]&&(n=h[n],o.push("shift")),_(n)&&o.push(n);return{key:n,modifiers:o,action:e=y(n,o,e)}}function b(t,e){return null!==t&&t!==o&&(t===e||b(t.parentNode,e))}function v(t){var e=this;if(t=t||o,!(e instanceof v))return new v(t);e.target=t,e._callbacks={},e._directMap={};var r,n={},s=!1,a=!1,i=!1;function c(t){t=t||{};var e,r=!1;for(e in n)t[e]?r=!0:n[e]=0;r||(i=!1)}function l(t,r,s,o,a,i){var c,l,h,u,p=[],d=s.type;if(!e._callbacks[t])return[];for("keyup"==d&&_(t)&&(r=[t]),c=0;c<e._callbacks[t].length;++c)if(l=e._callbacks[t][c],(o||!l.seq||n[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!s.metaKey&&!s.ctrlKey||(h=r,u=l.modifiers,h.sort().join(",")===u.sort().join(",")))){var f=!o&&l.combo==a,y=o&&l.seq==o&&l.level==i;(f||y)&&e._callbacks[t].splice(c,1),p.push(l)}return p}function h(t,r,n,s){e.stopCallback(r,r.target||r.srcElement,n,s)||!1===t(r,n)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(r),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(r))}function u(t){"number"!=typeof t.which&&(t.which=t.keyCode);var r=f(t);r&&("keyup"!=t.type||s!==r?e.handleKey(r,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):s=!1)}function p(t,e,o,a){function l(e){return function(){i=e,++n[t],clearTimeout(r),r=setTimeout(c,1e3)}}function u(e){h(o,e,t),"keyup"!==a&&(s=f(e)),setTimeout(c,10)}n[t]=0;for(var p=0;p<e.length;++p){var d=p+1===e.length?u:l(a||m(e[p+1]).action);y(e[p],d,a,t,p)}}function y(t,r,n,s,o){e._directMap[t+":"+n]=r;var a,i=(t=t.replace(/\s+/g," ")).split(" ");i.length>1?p(t,i,r,n):(a=m(t,n),e._callbacks[a.key]=e._callbacks[a.key]||[],l(a.key,a.modifiers,{type:a.action},s,t,o),e._callbacks[a.key][s?"unshift":"push"]({callback:r,modifiers:a.modifiers,action:a.action,seq:s,level:o,combo:t}))}e._handleKey=function(t,e,r){var n,s=l(t,e,r),o={},u=0,p=!1;for(n=0;n<s.length;++n)s[n].seq&&(u=Math.max(u,s[n].level));for(n=0;n<s.length;++n)if(s[n].seq){if(s[n].level!=u)continue;p=!0,o[s[n].seq]=1,h(s[n].callback,r,s[n].combo,s[n].seq)}else p||h(s[n].callback,r,s[n].combo);var d="keypress"==r.type&&a;r.type!=i||_(t)||d||c(o),a=p&&"keydown"==r.type},e._bindMultiple=function(t,e,r){for(var n=0;n<t.length;++n)y(t[n],e,r)},d(t,"keypress",u),d(t,"keydown",u),d(t,"keyup",u)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=class{buttonCssClass="hello-world-button";render(){const t=document.createElement("button");t.innerHTML="Hello Ottar",t.classList.add(this.buttonCssClass);const e=document.querySelector("body");t.onclick=function(){const t=document.createElement("p");t.classList.add("hello-world-text"),t.innerHTML="sdsdsadsa",e.appendChild(t)},e.appendChild(t)}};var e=r(441),n=r.n(e);function s(t){const e=t.match(/^(https?:)\/\/(([^:/?#]*)(?::([0-9]+))?)([/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return e?{href:t,protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7]}:{}}const o="WIDGET_API_PROTOCOL_1",a=["https://*.puzzel.com"];class i{constructor(t,e,{receiver:r}){this._id=1e3,this._calls=new Map,this._port=t,this._config=e,this._subscriptions={},this._observers={},this._callbacks={},this._mt=new(n()),t.onmessage=e=>{this._receiver(e),r&&r(e,t)},this._applyKeyboardPolicy(e.keyboardPolicy||{}),this.on("SYSTEM_APPLY_KEYBOARD_POLICY",(t=>this._applyKeyboardPolicy(t)))}get options(){return this._config}get port(){return this._port}_applyKeyboardPolicy(t){this._mt.reset(),Object.keys(t).forEach((e=>{const r=t[e],{command:n,target:s}=r,o=String(r.combo).toLowerCase();this._mt.bind(o,(t=>{t.preventDefault?t.preventDefault():t.returnValue=!1,this.call("events.publish",n,{target:s})}))}))}_receiver(t){const{type:e}=t.data;"event"===e&&this._handleEvent(t.data),"changed"===e&&this._handlePropertyChange(t.data),"result"===e&&this._handleResult(t.data),"error"===e&&this._handleError(t.data),"call"===e&&this._handleCallbackCall(t.data)}_handleResult({value:t,id:e}){if(this._calls.has(e)){const{resolve:r}=this._calls.get(e);this._calls.delete(e),r(t)}}_handleError({value:t,id:e}){if(this._calls.has(e)){const{reject:r}=this._calls.get(e);this._calls.delete(e),r(t)}}_handleEvent({name:t,value:e}){this._subscriptions[t]&&this._subscriptions[t].forEach((t=>t(e)))}_handlePropertyChange({name:t,old:e,new:r}){this._observers[t]&&this._observers[t].forEach((t=>t(r,e)))}_handleCallbackCall({name:t,value:e,id:r}){this._callbacks[t]?new Promise((r=>r(this._callbacks[t](...e)))).then((t=>{this._port.postMessage({result:t,id:r})})).catch((t=>{this._port.postMessage({error:t,id:r})})):this._port.postMessage({error:"Callback not found.",id:r})}on(t,e){const r=Array.isArray(this._subscriptions[t]);return this._subscriptions[t]=r?this._subscriptions[t].concat(e):[e],r||this._port.postMessage({subscribe:t}),()=>{const r=this._subscriptions[t];r&&(this._subscriptions[t]=r.filter((t=>t!==e)))}}call(t,...e){return function(t,e){let r;const n=new Promise(((t,n)=>{r=setTimeout((()=>n(new Error("Promise timeout"))),e)}));return Promise.race([t,n]).then((t=>(r&&clearTimeout(r),t))).catch((t=>{throw r&&clearTimeout(r),t}))}(new Promise(((r,n)=>{this._calls.set(this._id,{resolve:r,reject:n}),this._port.postMessage({call:t,args:e,id:this._id}),this._id+=1})),2e4)}get(t){return this.call(t)}watch(t,e){const r=Array.isArray(this._observers[t]);return this._observers[t]=r?this._observers[t].concat(e):[e],r||this._port.postMessage({watch:t}),()=>{const r=this._observers[t];r&&(this._observers[t]=r.filter((t=>t!==e)))}}ready(){this._port.postMessage({ready:!0})}callback(t,e){return this._callbacks[t]=e,()=>{delete this._callbacks[t]}}}function c(t=a,e={}){return new Promise(((r,n)=>{Array.isArray(t)||(t=[t]);window.addEventListener("message",(o=>{t.some((t=>function(t,e){const r=s(t),n=s(e);return function(...t){const e=t.map((t=>(t||"").split("."))).map((t=>t.reverse())).sort(((t,e)=>e.length-t.length)),[r,...n]=e;return r.every(((t,e)=>n.every((r=>r.length<e+1?"*"===r[r.length-1]:r[e]===t||"*"===r[e]||"*"===t))))}(r.hostname,n.hostname)&&r.port===n.port&&r.protocol===n.protocol}(t,o.origin)))?r(new i(o.ports[0],o.data,e)):n(new Error(`Connection to host rejected: The origin ${o.origin} doesn't match.`))}),{once:!0}),window.parent.postMessage(o,"*")}))}const l=document.querySelector("textarea.console");function h(t){l&&l instanceof HTMLTextAreaElement&&(l.textContent+=t+"\n",l.scrollTop=l.scrollHeight)}function u(t){h(`onUserStatusUpdated: ${JSON.stringify(t)}`)}function p(t){h(`onUserStatusUpdated: ${JSON.stringify(t)}`)}function d(t){h(`onUserStatusUpdated: ${JSON.stringify(t)}`)}const f=class{main(){const t=c();var e;e="---\x3e Connected",h(`onMessage: ${JSON.stringify(e)}`),t.on("SYSTEM_USER_STATUS_CHANGED",u),t.on("SYSTEM_CALL_STATE_CHANGE",p),t.on("SYSTEM_STATE_UPDATED",d)}};(new t).render();(new f).main()})()})();